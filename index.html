<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Eliana’s WA Driver's Practice – v2</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}
    .img-shadow{box-shadow:0 10px 25px rgba(0,0,0,.15)}
    .link{cursor:pointer}
  </style>
</head>
<body class="bg-pink-50">
  <div id="root"></div>
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script type="text/babel">
    const {useMemo,useState,useEffect} = React;
    const YES_COUNT = 78; const NO_COUNT = 47;
    const YES_FOLDER = "yes"; const NO_FOLDER = "no";
    const yesUrl = n => `./${YES_FOLDER}/Yes_${n}.jpg`;
    const noUrl  = n => `./${NO_FOLDER}/No_${n}.jpg`;
    const randInt=(min,max)=>Math.floor(Math.random()*(max-min+1))+min;
    /** @type {{id:string,category:string,question:string,choices:string[],correctIndex:number,explanation?:string}[]} */
    const QUESTION_BANK=[
      {id:"sign-1",category:"Road Signs",question:"What does a flashing yellow light mean?",
       choices:["Stop completely, then proceed when clear","Proceed with caution; slow down and be prepared to yield","It’s a protected left-turn signal","Traffic signal is about to turn red; stop immediately"],
       correctIndex:1,explanation:"A flashing yellow means proceed with caution and be ready to yield."},
      {id:"sign-2",category:"Road Signs",question:"A pentagon-shaped sign indicates:",
       choices:["Railroad crossing","School zone or school crossing","No passing zone","Work zone"],
       correctIndex:1,explanation:"Pentagon = school zone/crossing."},
      {id:"rules-1",category:"Rules of the Road",question:"You reach a four-way stop at the same time as a car on your right. Who goes first?",
       choices:["You do","They do","Whoever is going straight","Largest vehicle"],
       correctIndex:1,explanation:"Vehicle on the right has right-of-way when arriving simultaneously."},
      {id:"rules-2",category:"Rules of the Road",question:"When must you use headlights in WA?",
       choices:["Only when it's raining","30 minutes after sunset to 30 minutes before sunrise — and any time visibility is reduced","Only on rural roads","Only on highways"],
       correctIndex:1,explanation:"Use headlights during those times or when visibility is reduced."},
      {id:"veh-1",category:"Vehicles",question:"When parking downhill with a curb, turn your wheels:",
       choices:["Toward the curb","Away from the curb","Straight","Doesn't matter"],
       correctIndex:0,explanation:"Turn toward the curb so the car rolls into it if brakes fail."},
      {id:"veh-2",category:"Vehicles",question:"ABS helps you during emergency braking by:",
       choices:["Shortening stopping distance","Letting you steer while braking","Turning on hazard lights","Locking the wheels for grip"],
       correctIndex:1,explanation:"ABS allows steering control while braking hard."},
      {id:"risk-1",category:"Risks",question:"Hydroplaning: what should you do first?",
       choices:["Brake hard","Ease off the accelerator and steer straight","Turn sharply","Shift to neutral and turn off ignition"],
       correctIndex:1,explanation:"Ease off gas and keep wheels straight until traction returns."},
      {id:"risk-2",category:"Risks",question:"The three‑second rule helps you set:",
       choices:["Stopping distance","Following distance","Reaction time","Blind spot size"],
       correctIndex:1,explanation:"Use it to maintain safe following distance."},
      {id:"safe-1",category:"Safety",question:"Before changing lanes, best practice is to:",
       choices:["Signal only","Signal, check mirrors, and look over your shoulder","Honk and go","Speed up without signaling"],
       correctIndex:1,explanation:"Signal + mirrors + shoulder check for blind spots."},
    ];
    const KEY_ATTEMPTS="eliana_attempts_v2";
    const readAttempts=()=>{try{const r=localStorage.getItem(KEY_ATTEMPTS);return r?JSON.parse(r):[]}catch{return[]}};
    const writeAttempts=(a)=>localStorage.setItem(KEY_ATTEMPTS,JSON.stringify(a));
    function bestScoresByCategory(attempts){const best={};for(const a of attempts){const k=a.category||"All";if(!best[k]||a.percent>best[k].percent)best[k]=a;}return best;}
    function App(){const[route,setRoute]=useState("home");const go=(r)=>{setRoute(r);window.scrollTo(0,0);};
      return(<div className="min-h-screen">
        <Nav onGo={go}/>
        <main className="mx-auto max-w-4xl px-4 py-6">
          {route==='home'&&<Home go={go}/>}
          {route==='quiz'&&<QuizPage go={go}/>}
          {route==='tips'&&<TipsPage/>}
          {route==='rules'&&<RulesPage/>}
          {route==='vehicles'&&<VehiclesPage/>}
          {route==='risks'&&<RisksPage/>}
          {route==='vocab'&&<VocabPage/>}
          {route==='scores'&&<ScoresPage/>}
        </main></div>);}
    function Nav({onGo}){return(<div className="sticky top-0 z-10 bg-pink-100/90 backdrop-blur border-b border-pink-200">
      <div className="mx-auto max-w-4xl px-4 py-3 flex items-center gap-2">
        <button onClick={()=>onGo('home')} className="rounded-xl bg-black text-white px-3 py-1.5 hover:bg-pink-600">Home</button>
        <div className="hidden md:flex gap-2">
          <button onClick={()=>onGo('quiz')} className="rounded-xl border border-pink-400 px-3 py-1.5">Quiz</button>
          <button onClick={()=>onGo('tips')} className="rounded-xl border border-pink-400 px-3 py-1.5">Hints & Tips</button>
          <button onClick={()=>onGo('rules')} className="rounded-xl border border-pink-400 px-3 py-1.5">Rules of the Road</button>
          <button onClick={()=>onGo('vehicles')} className="rounded-xl border border-pink-400 px-3 py-1.5">Vehicles</button>
          <button onClick={()=>onGo('risks')} className="rounded-xl border border-pink-400 px-3 py-1.5">Risks</button>
          <button onClick={()=>onGo('vocab')} className="rounded-xl border border-pink-400 px-3 py-1.5">Vocab</button>
          <button onClick={()=>onGo('scores')} className="rounded-xl border border-pink-400 px-3 py-1.5">Top Scores</button>
        </div></div></div>);}
    function Home({go}){return(<div className="space-y-6">
      <header className="flex items-center justify-between"><h1 className="text-2xl md:text-3xl font-bold text-black">Eliana’s WA Driver’s Practice</h1><span className="text-sm text-pink-600">Beat your best, learn fast.</span></header>
      <div className="grid sm:grid-cols-2 gap-4">
        <Card title="Take a Quiz" desc="Smart practice across topics." onClick={()=>go('quiz')}/>
        <Card title="Top Scores" desc="Can you beat your best today?" onClick={()=>go('scores')}/>
        <Card title="Hints & Tips" desc="Memory boosters and strategies." onClick={()=>go('tips')}/>
        <Card title="Rules of the Road" desc="Signals, signs, intersections, parking." onClick={()=>go('rules')}/>
        <Card title="Vehicles" desc="Controls, maintenance, safety tech." onClick={()=>go('vehicles')}/>
        <Card title="Risks" desc="Speed, space, time, conditions." onClick={()=>go('risks')}/>
        <Card title="Vocab" desc="Glossary-built flashcards." onClick={()=>go('vocab')}/>
      </div></div>);}
    function Card({title,desc,onClick}){return(<button onClick={onClick} className="rounded-2xl bg-white p-5 text-left shadow border border-pink-200 hover:border-black transition"><div className="text-lg font-semibold text-black">{title}</div><div className="mt-1 text-sm text-neutral-700">{desc}</div></button>);}
    function shuffle(a){a=[...a];for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];}return a;}
    function QuizPage({go}){
      const[started,setStarted]=useState(false);const[category,setCategory]=useState("All");const[count,setCount]=useState(10);const[instantFeedback,setInstantFeedback]=useState(true);
      const[current,setCurrent]=useState(0);const[answers,setAnswers]=useState({});const[showResults,setShowResults]=useState(false);const[answerOrderSeed,setAnswerOrderSeed]=useState(0);const[feedbackImg,setFeedbackImg]=useState(null);
      const categories=useMemo(()=>["All",...Array.from(new Set(QUESTION_BANK.map(q=>q.category)))],[]);
      const filtered=useMemo(()=>{const pool=category==="All"?QUESTION_BANK:QUESTION_BANK.filter(q=>q.category===category);return shuffle(pool).slice(0,Math.min(count,pool.length));},[category,count,started]);
      const answerOrderMap=useMemo(()=>{const map={};filtered.forEach(q=>map[q.id]=shuffle(q.choices.map((_,i)=>i)));return map;},[filtered,answerOrderSeed]);
      const currentQ=filtered[current];
      function selectAnswer(choiceIndex){setAnswers(p=>({...p,[currentQ.id]:choiceIndex}));const ok=choiceIndex===currentQ.correctIndex;if(ok){setFeedbackImg({src:yesUrl(randInt(1,YES_COUNT)),alt:"Yes!"});}else{setFeedbackImg({src:noUrl(randInt(1,NO_COUNT)),alt:"Try again"});}}
      function next(){if(current<filtered.length-1){setCurrent(c=>c+1);setFeedbackImg(null);}else setShowResults(true);} function prev(){if(current>0){setCurrent(c=>c-1);setFeedbackImg(null);}}
      const score=filtered.reduce((s,q)=>s+((answers[q.id]===q.correctIndex)?1:0),0); const percent=Math.round((score/filtered.length)*100);
      function restart(){setStarted(false);setCurrent(0);setAnswers({});setShowResults(false);setAnswerOrderSeed(x=>x+1);setFeedbackImg(null);}
      useEffect(()=>{if(showResults){const a=readAttempts();a.push({date:new Date().toISOString(),category,score,total:filtered.length,percent});writeAttempts(a);}},[showResults]);
      return(<div className="space-y-6">
        {!started?(<div className="rounded-2xl bg-white p-5 shadow border border-pink-300">
          <h2 className="mb-4 text-xl font-semibold text-black">Quiz Settings</h2>
          <div className="grid gap-4 md:grid-cols-3">
            <div className="flex flex-col gap-2"><label className="text-sm text-pink-700">Category</label><select className="rounded-xl border border-pink-400 p-2" value={category} onChange={e=>setCategory(e.target.value)}>{categories.map(c=><option key={c} value={c}>{c}</option>)}</select></div>
            <div className="flex flex-col gap-2"><label className="text-sm text-pink-700"># of Questions</label><input className="rounded-xl border border-pink-400 p-2" type="number" min="5" max="20" value={count} onChange={e=>setCount(Number(e.target.value))}/></div>
            <div className="flex items-center gap-3"><input id="instant" type="checkbox" className="h-5 w-5 text-pink-600" checked={instantFeedback} onChange={e=>setInstantFeedback(e.target.checked)}/><label htmlFor="instant" className="text-sm text-black">Instant feedback</label></div>
          </div>
          <div className="mt-6 flex gap-3"><button onClick={()=>setStarted(true)} className="rounded-2xl bg-black px-5 py-3 text-white hover:bg-pink-600">Start</button><button onClick={()=>go('scores')} className="rounded-2xl border border-pink-400 px-5 py-3">See Top Scores</button></div>
        </div>):!showResults?(<QuestionCard index={current} total={filtered.length} q={currentQ} chosen={answers[currentQ.id]??null} onChoose={selectAnswer} onNext={next} onPrev={prev} instantFeedback={instantFeedback} order={answerOrderMap[currentQ.id]} feedbackImg={feedbackImg}/>):(
          <div className="rounded-2xl bg-white p-6 shadow border border-pink-300"><h2 className="text-xl font-semibold text-black">Great work, Eliana!</h2><p className="mt-2 text-neutral-700">Score: <b>{score}</b> / {filtered.length} ({percent}%)</p>
            <div className="mt-4 flex gap-2"><button onClick={restart} className="rounded-2xl bg-black px-5 py-2 text-white hover:bg-pink-600">Try Again</button><button onClick={()=>go('scores')} className="rounded-2xl border border-pink-400 px-5 py-2">View Top Scores</button><button onClick={()=>go('home')} className="rounded-2xl border border-pink-400 px-5 py-2">Home</button></div>
          </div>)}
      </div>);}
    function QuestionCard({index,total,q,chosen,onChoose,onNext,onPrev,instantFeedback,order,feedbackImg}){
      const answered=chosen!==null&&chosen!==undefined; const ok=answered?chosen===q.correctIndex:false;
      return(<div className="rounded-2xl bg-white p-5 shadow border border-pink-200">
        <div className="mb-4 flex items-center justify-between"><span className="text-sm text-neutral-500">Question {index+1} of {total}</span><span className="text-sm font-medium text-pink-600">{q.category}</span></div>
        <h2 className="mb-4 text-xl font-semibold text-black">{q.question}</h2>
        <div className="space-y-3">{order.map((choiceIdx,i)=>{const sel=chosen===choiceIdx; const showC=instantFeedback&&answered&&choiceIdx===q.correctIndex; const showW=instantFeedback&&sel&&!ok;
          return(<button key={i} onClick={()=>onChoose(choiceIdx)} className={["w-full rounded-xl border p-3 text-left transition", sel?"border-black bg-pink-50":"border-neutral-200", showC?"bg-green-50 border-green-400":"", showW?"bg-red-50 border-red-400":""].join(" ")}>
            <span className="mr-2 font-mono text-sm text-neutral-500">{i+1}.</span> {q.choices[choiceIdx]}
          </button>);})}</div>
        {instantFeedback&&answered&&(<div className={"mt-4 rounded-xl p-3 "+(ok?"bg-green-50":"bg-orange-50")}><p className="text-sm">{ok?"Correct!":"Not quite."} {q.explanation&&<span>{q.explanation}</span>}</p></div>)}
        {answered&&feedbackImg&&(<div className="mt-4 flex justify-center"><img src={feedbackImg.src} alt={feedbackImg.alt} className="max-h-72 rounded-xl img-shadow object-contain" onError={(e)=>{e.currentTarget.style.display='none';}}/></div>)}
        <div className="mt-6 flex items-center justify-between"><button onClick={onPrev} disabled={index===0} className="rounded-xl border px-4 py-2 border-pink-400 disabled:opacity-40">Back</button><button onClick={onNext} className="rounded-2xl bg-black px-5 py-2 text-white hover:bg-pink-600">{index===total-1?"Finish":"Next"}</button></div>
      </div>);}
    function ScoresPage(){const[attempts,setAttempts]=useState(readAttempts());
      useEffect(()=>{const h=()=>setAttempts(readAttempts());window.addEventListener('storage',h);return()=>window.removeEventListener('storage',h);},[]);
      const best=bestScoresByCategory(attempts); const cats=Object.keys(best);
      return(<div className="space-y-6">
        <div className="rounded-2xl bg-white p-5 shadow border border-pink-300"><h2 className="text-xl font-semibold text-black">Top Scores</h2>
          {cats.length===0?<p className="text-sm mt-2 text-neutral-700">No attempts yet. Take a quiz!</p>:
            (<div className="mt-4 grid sm:grid-cols-2 gap-3">{cats.map(cat=>{const b=best[cat];return(<div key={cat} className="rounded-xl border p-3"><div className="text-sm text-neutral-500">{cat}</div><div className="text-lg font-semibold text-black">{b.percent}% <span className="text-sm text-neutral-600">({b.score}/{b.total})</span></div><div className="text-xs text-neutral-500">on {new Date(b.date).toLocaleString()}</div></div>);})}</div>)}
        </div>
        <div className="rounded-2xl bg-white p-5 shadow border border-pink-200"><h3 className="text-lg font-semibold text-black">All Attempts</h3>
          {attempts.length===0?<p className="text-sm mt-2 text-neutral-700">No attempts yet.</p>:(
            <div className="overflow-x-auto mt-3"><table className="w-full text-sm"><thead><tr className="text-left"><th className="py-1 pr-2">When</th><th className="py-1 pr-2">Category</th><th className="py-1 pr-2">Score</th><th className="py-1 pr-2">%</th></tr></thead>
            <tbody>{attempts.slice().reverse().map((a,i)=>(<tr key={i} className="border-t"><td className="py-1 pr-2">{new Date(a.date).toLocaleString()}</td><td className="py-1 pr-2">{a.category}</td><td className="py-1 pr-2">{a.score}/{a.total}</td><td className="py-1 pr-2">{a.percent}%</td></tr>))}</tbody></table></div>
          )}
          {attempts.length>0&&(<button onClick={()=>{if(confirm("Clear all saved scores?")){localStorage.removeItem(KEY_ATTEMPTS);setAttempts([]);}}} className="mt-3 rounded-xl border border-pink-400 px-3 py-1.5">Clear all</button>)}
        </div></div>);}
    function TipsPage(){return(<div className="rounded-2xl bg-white p-5 shadow border border-pink-300"><h2 className="text-xl font-semibold text-black">Hints & Tips</h2>
      <ul className="list-disc pl-6 mt-2 text-sm text-neutral-700 space-y-1">
        <li>Do 10–15 questions at a time; short breaks help memory.</li>
        <li>Say answers out loud; teach back to a parent for bonus points.</li>
        <li>Use the Yes/No images as “streaks.” Aim for a 5‑in‑a‑row streak!</li>
        <li>When unsure, eliminate 2 choices first, then pick between the final 2.</li>
        <li>On the road, call out signs and their meanings while riding as a passenger.</li>
      </ul></div>);}
    function RulesPage(){return(<div className="space-y-3">
      <SectionCard title="Traffic signals & signs" desc="Coming up: concise, test‑style summaries + quick quizzes for each."/>
      <SectionCard title="Intersections, turns & roundabouts" desc="Right‑of‑way, U‑turns, diverging diamonds."/>
      <SectionCard title="Parking & hills" desc="Where/when you can park; hills with/without curbs."/>
      <SectionCard title="School / work / emergency zones" desc="Speeds, fines, and safe passing rules."/>
    </div>);}
    function VehiclesPage(){return(<div className="space-y-3">
      <SectionCard title="Know your vehicle" desc="Controls, reference points, mirrors, blind zones."/>
      <SectionCard title="Safety tech (ADAS)" desc="ABS, lane keeping, blind‑spot monitoring—assist, not replace!"/>
      <SectionCard title="Maintenance" desc="Tires (2/32"), lights, signals, wipers, fluids."/>
      <SectionCard title="Occupant protection" desc="Seat belts, airbags, child seats."/>
    </div>);}
    function RisksPage(){return(<div className="space-y-3">
      <SectionCard title="Speed / Space / Time" desc="Following distance, merging, counting seconds."/>
      <SectionCard title="Conditions" desc="Night, rain, fog, curves, hydroplaning & skids."/>
      <SectionCard title="Impairment & distraction" desc="Alcohol, cannabis, meds, fatigue, phones."/>
      <SectionCard title="Breakdowns & crashes" desc="Communicating risks, reporting collisions."/>
    </div>);}
    function VocabPage(){return(<div className="rounded-2xl bg-white p-5 shadow border border-pink-300"><h2 className="text-xl font-semibold text-black">Glossary Flashcards</h2><p className="text-sm text-neutral-700 mt-2">I’ll auto-fill this from the official WA DOL glossary next step. Cards will flip for definitions and add a mini‑quiz.</p></div>);}
    function SectionCard({title,desc}){return(<div className="rounded-2xl bg-white p-5 shadow border border-pink-200"><div className="text-lg font-semibold text-black">{title}</div><div className="text-sm text-neutral-700 mt-1">{desc}</div></div>);}
    const root=ReactDOM.createRoot(document.getElementById("root")); root.render(<App/>);
  </script>
</body>
</html>